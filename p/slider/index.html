<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Slider</title>
	<link rel="stylesheet" type="text/css" href="slider.css">
	<link rel="stylesheet" type="text/css" href="../../css/thinking.css">
</head>
<body>
	<section>
		<h3>Example One: Easiest</h3>
		<p><a href="javascript:void(0)" id="slide_trigger_1">Slide Once A Click</a></p>
		<div id="slide_outer_1">
			<ul id="slide_1">
		    	<li><img src="img/1.jpg" /></li>
		        <li><img src="img/2.jpg" /></li>
		        <li><img src="img/3.jpg" /></li>
		        <li><img src="img/4.jpg" /></li>
		        <li><img src="img/5.jpg" /></li>
		    </ul>
		</div>
	</section>

	<div class="thinking">
		<h2>基本思路</h2>
		<ol>
			<li>搞个定时器，修改容器的left值</li>
			<li>检测队列中的第一个元素是否离开视野（<em>left值小于或等于first element的width</em>）</li>
			<li>是：将first element移到队列最后（last element）并<em>重置left值为0</em></li>
			<li>不是：将left值加个Δleft；继续修改left</li>
			<li>将first element移到最后，直接调用parent的appendChild方法，即<em>parent.appendChild(firstElement)</em></li>
			<li>其他：都忒么是浮云了，就不纠结</li>
		</ol>
	</div>
</body>
<script type="text/javascript" src="../../saber/base.js"></script>
<script type="text/javascript">
	var input1 = S.$('slide_trigger_1');
	var div = S.$('slide_outer_1');
	var ul = S.$('slide_1');
	S.on(input1, 'click', slide);
	var lock = false;
	var tid = 0;
	function slide(e) {
		if(lock) {
			return false;
		}
		lock = !lock;
		e = e || event;
		var currFirst = S.first(ul);
		var deltaL = parseInt(S.style(currFirst, 'width')) + parseInt(S.style(currFirst, 'marginRight'));
		var time = 4;
		tid = setTimeout(function() {
			var cL = Math.abs(parseInt(S.style(ul, 'left')));
			if(cL >= deltaL && time) {
				--time;
				ul.appendChild(currFirst);
				currFirst = S.first(ul);
				S.style(ul, 'left', 0);
				if(!time) {
					lock = !lock;
					clearTimeout(tid);
					return true;
				}
			}else {
				S.style(ul, 'left', -cL-5+'px');
			}
			tid = setTimeout(arguments.callee, 10)
		}, 10);
	}
</script>
</html>